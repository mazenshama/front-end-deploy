<!-- <nav class="app-navbar">
    <div class="nav-container">
        <div class="logo">
            <img src="favicon.ico" alt="Bus Icon" />
            <span>BusTrack</span>
        </div>

        <button class="menu-toggle" (click)="isMenuOpen = !isMenuOpen">
      <lucide-icon [name]="isMenuOpen ? 'x' : 'menu'" size="22"></lucide-icon>
    </button>

        <ul class="nav-links" [class.show]="isMenuOpen">
            @for (page of pages; track page.id) {
            <li>
                <a href="javascript:void(0)" (click)="navigate(page.id); isMenuOpen = false" [class.active]="currentPage === page.id" class="flex items-center gap-1">
                    <lucide-icon [name]="page.icon" size="18"></lucide-icon>
                    {{ page.name }}
                </a>
            </li>
            }

            <li class="mobile-buttons">
                @if (!isLoggedIn) {
                <button class="sign-in-btn" (click)="signIn(); isMenuOpen = false">Sign In</button> } @else {
                <button class="dashboard-btn" (click)="navigate('dashboard'); isMenuOpen = false">Dashboard</button>
                <button class="sign-out-btn" (click)="signOut(); isMenuOpen = false">Sign Out</button> }
            </li>
        </ul>

        <div class="nav-buttons">
            @if (!isLoggedIn) {
            <button class="sign-in-btn" (click)="signIn()">Sign In</button> } @else {
            <button class="dashboard-btn" (click)="navigate('dashboard')">Dashboard</button>
            <button class="sign-out-btn" (click)="signOut()">Sign Out</button> }
        </div>
    </div>
</nav> -->
<!-- <nav class="app-navbar"> -->
<!-- <nav class="nav-bar">

    <div class="nav-container">
        <div class="logo">
            <img src="favicon.ico" alt="Bus Icon" />
            <span>BusTrack</span>
        </div>

        <button class="menu-toggle" (click)="isMenuOpen = !isMenuOpen">
      <lucide-icon [name]="isMenuOpen ? 'x' : 'menu'" size="22"></lucide-icon>
    </button>

        <ul class="nav-links" [class.show]="isMenuOpen">
            @for (page of pages; track page.id) {
            <li>
                <a href="javascript:void(0)" (click)="navigate(page.id); isMenuOpen = false" [class.active]="currentPage === page.id" class="flex items-center gap-1">
                    <lucide-icon [name]="page.icon" size="18"></lucide-icon>
                    {{ page.name }}
                </a>
            </li>
            }

            <li class="mobile-buttons">
                @if (!isLoggedIn) {
                <button class="sign-in-btn" (click)="openLogin(); isMenuOpen = false">Sign In</button> } @else { @if (userRole === 'driver' || userRole === 'admin') {
                <button class="dashboard-btn" (click)="navigate(userRole === 'driver' ? 'driver-dashboard' : 'admin-dashboard'); isMenuOpen = false">
        Dashboard
      </button> }
                <button class="sign-out-btn" (click)="signOut(); isMenuOpen = false">
      Sign Out
    </button> }
            </li>

        </ul>

        <div class="nav-buttons">
            @if (!isLoggedIn) {
            <button class="sign-in-btn" (click)="openLogin()">Sign In</button> } @else { @if (userRole === 'driver' || userRole === 'admin') {
            <button class="dashboard-btn" (click)="navigate(userRole === 'driver' ? 'driver-dashboard' : 'admin-dashboard')">
        Dashboard
      </button> }
            <button class="sign-out-btn" (click)="signOut()">Sign Out</button> }
        </div>

    </div>
</nav> -->
<nav class="nav-bar">
    <div class="nav-container">

        <!-- Logo -->
        <div class="logo">
            <img src="assets/logo.png" alt="Bus Icon" />
            <span>BusTrack</span>
        </div>

        <!-- Mobile menu toggle -->
        <button class="menu-toggle" (click)="toggleMenu()">
      <lucide-icon [name]="isMenuOpen ? 'x' : 'menu'" size="22"></lucide-icon>
    </button>

        <!-- Nav links -->
        <ul class="nav-links" [class.show]="isMenuOpen">
            <li *ngFor="let page of pages">
                <a href="javascript:void(0)" (click)="navigate(page.id)" [class.active]="currentPage === page.id" class="flex items-center gap-1">
                    <lucide-icon [name]="page.icon" size="18"></lucide-icon>
                    {{ page.name }}
                </a>
            </li>

            <!-- Mobile buttons -->
            <li class="mobile-buttons">
                <button *ngIf="!(user$ | async)" class="sign-in-btn" (click)="openLogin()">Sign In</button>

                <ng-container *ngIf="user$ | async as user">
                    <button *ngIf="user.role === 'driver' || user.role === 'admin'" class="dashboard-btn" (click)="goToDashboard(user.role)">
            Dashboard
          </button>
                    <button class="sign-out-btn" (click)="signOut()">Sign Out</button>
                </ng-container>
            </li>
        </ul>

        <!-- Desktop buttons -->
        <div class="nav-buttons">
            <button *ngIf="!(user$ | async)" class="sign-in-btn" (click)="openLogin()">Sign In</button>

            <ng-container *ngIf="user$ | async as user">
                <button *ngIf="user.role === 'driver' || user.role === 'admin'" class="dashboard-btn" (click)="goToDashboard(user.role)">
          Dashboard
        </button>
                <button class="sign-out-btn" (click)="signOut()">Sign Out</button>
            </ng-container>
        </div>

    </div>
</nav>
