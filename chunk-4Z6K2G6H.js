import{a as M}from"./chunk-K3A6S7JU.js";import{d as y,e as E,g as F}from"./chunk-CMPSC4YI.js";import"./chunk-DVCEIMDV.js";import"./chunk-4QIIHPU5.js";import{a as R,b as d,c as A,d as k,e as O,g as c,i as I,k as N,l as T,m as q,n as D,o as L,q as U}from"./chunk-6TR5I43M.js";import{$ as x,$a as u,Aa as C,Da as s,Ea as h,Pa as p,Sa as m,Za as e,Zb as P,_a as t,db as v,eb as S,ib as n,rb as w}from"./chunk-LV7AXBPZ.js";function V(r,a){r&1&&(e(0,"div",28),n(1," Name is required "),t())}function z(r,a){r&1&&(e(0,"div",28),n(1," Invalid email format or Email not found "),t())}function $(r,a){r&1&&(e(0,"p"),n(1,"Password is required"),t())}function j(r,a){r&1&&(e(0,"p"),n(1,"Password must contain at least eight characters, at least one number and both lower and uppercase letters and special characters."),t())}function Z(r,a){if(r&1&&(e(0,"div",28),p(1,$,2,0,"p",29)(2,j,2,0,"p",29),t()),r&2){let o,i,l=S();s(),m("ngIf",(o=l.regForm.get("password"))==null?null:o.getError("required")),s(),m("ngIf",(i=l.regForm.get("password"))==null?null:i.getError("pattern"))}}function B(r,a){r&1&&(e(0,"div",28)(1,"p"),n(2,"Password is not match"),t()())}function H(r,a){r&1&&(e(0,"div",28),n(1," Role is required "),t())}var G=class r{constructor(a,o){this._AuthServices=a;this._Router=o}isconPasswordValid=!1;errorMessage="";isLoading=!1;regForm=new O({name:new c("",[d.required]),email:new c("",[d.required,d.email]),password:new c("",[d.required,d.pattern(/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{8,}$/)]),confirmPassword:new c("",[d.required,d.pattern(/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{8,}$/)]),role:new c("",[d.required])});SignUp(){if(this.regForm.valid){if(this.regForm.value.password!==this.regForm.value.confirmPassword){this.errorMessage="Passwords do not match";return}this.isLoading=!0,this.errorMessage="";let a={name:this.regForm.value.name,email:this.regForm.value.email,password:this.regForm.value.password,phone:"",role:this.regForm.value.role};this._AuthServices.serSignUp(a).subscribe({next:o=>{if(console.log(o),this.isLoading=!1,o.success&&o.user){let i=o.user.role.toLowerCase();i==="admin"?this._Router.navigate(["/admin"]):i==="driver"?this._Router.navigate(["/driver"]):this._Router.navigate(["/home"])}else this.errorMessage=o.message||"Registration failed"},error:o=>{this.isLoading=!1,this.errorMessage=o.error?.message||"An error occurred during registration",console.error("Registration error:",o)}})}}matchPassword(){this.regForm.value.password==this.regForm.value.confirmPassword?this.isconPasswordValid=!0:this.isconPasswordValid=!1}static \u0275fac=function(o){return new(o||r)(h(M),h(y))};static \u0275cmp=x({type:r,selectors:[["app-register"]],standalone:!0,features:[w],decls:57,vars:6,consts:[["rel","stylesheet","href",C`https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css`],[1,"login-con"],[1,"login-card"],[1,"login-icon"],[1,"fa-solid","fa-lg","fa-bus-side"],[1,"login-title"],[1,"login-subtitle"],[1,"signInUp-buttons"],["routerLink","/register",1,"toggle-button1"],["routerLink","/login",1,"toggle-button2"],[3,"ngSubmit","formGroup"],[1,"label"],["type","text","formControlName","name","placeholder","John Doe",1,"form-control"],["class","alert alert-danger","role","alert",4,"ngIf"],["type","email","formControlName","email","placeholder","example@gmail.com",1,"form-control"],["type","password","formControlName","password","placeholder","Enter the pass",1,"form-control",3,"keyup"],["type","password","formControlName","confirmPassword","placeholder","Confirm password",1,"form-control",3,"keyup"],["type","text","formControlName","role",1,"form-control"],["value","Admin"],["value","Driver"],["type","submit",1,"createAccount-button"],[1,"fa-solid","fa-user-plus","me-2"],[1,"line"],[1,"instrucion-con"],[1,"fw-bold"],[1,"ins-desc"],[1,"instructions"],[1,"alert"],["role","alert",1,"alert","alert-danger"],[4,"ngIf"]],template:function(o,i){if(o&1&&(u(0,"link",0),e(1,"div",1)(2,"div",2)(3,"div",3),u(4,"i",4),t(),e(5,"h4",5),n(6,"BusTrack"),t(),e(7,"p",6),n(8,"Create your account to get started"),t(),e(9,"div",7)(10,"button",8),n(11,"Sign Up"),t(),e(12,"button",9),n(13,"Sign In"),t()(),e(14,"form",10),v("ngSubmit",function(){return i.SignUp()}),e(15,"label",11),n(16,"Full Name"),t(),u(17,"input",12),p(18,V,2,0,"div",13),e(19,"label",11),n(20,"Email"),t(),u(21,"input",14),p(22,z,2,0,"div",13),e(23,"label",11),n(24,"Password"),t(),e(25,"input",15),v("keyup",function(){return i.matchPassword()}),t(),p(26,Z,3,2,"div",13),e(27,"label",11),n(28,"Confirm Password"),t(),e(29,"input",16),v("keyup",function(){return i.matchPassword()}),t(),p(30,B,3,0,"div",13),e(31,"label",11),n(32,"Role"),t(),e(33,"select",17)(34,"option",18),n(35,"Admin"),t(),e(36,"option",19),n(37,"Driver"),t()(),p(38,H,2,0,"div",13),e(39,"button",20),u(40,"i",21),n(41," Create Account "),t()(),u(42,"p",22),e(43,"div",23)(44,"p",24),n(45,"Getting Started:"),t(),e(46,"div",25)(47,"p",26),n(48,"1. Create an account using the Sign Up tab"),t(),e(49,"p",26),n(50,"2. Select your role (Admin for management, Driver for trips)"),t(),e(51,"p",26),n(52,"3. Password must be at least 6 characters"),t(),e(53,"p",26),n(54,"4. You'l be automatically signed in after signup"),t()(),e(55,"p",27),n(56,'If "Invalid credentials" appears, check that you have registered an account first.'),t()()()()),o&2){let l,g,f,b,_;s(14),m("formGroup",i.regForm),s(4),m("ngIf",((l=i.regForm.get("name"))==null?null:l.invalid)&&((l=i.regForm.get("name"))==null?null:l.touched)),s(4),m("ngIf",((g=i.regForm.get("email"))==null?null:g.invalid)&&((g=i.regForm.get("email"))==null?null:g.touched)),s(4),m("ngIf",((f=i.regForm.get("password"))==null?null:f.invalid)&&((f=i.regForm.get("password"))==null?null:f.touched)),s(4),m("ngIf",!i.isconPasswordValid&&((b=i.regForm.get("confirmPassword"))==null?null:b.touched)),s(8),m("ngIf",((_=i.regForm.get("role"))==null?null:_.invalid)&&((_=i.regForm.get("role"))==null?null:_.touched))}},dependencies:[U,I,D,L,R,q,A,k,N,T,P,F,E],styles:['app-login[_ngcontent-%COMP%]{margin:0;padding:0;background-color:#000}.login-con[_ngcontent-%COMP%]{font-family:Arial;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;margin:30px auto;width:450px;padding:24px;box-shadow:0 2px 10px #0000001a;border-radius:10px}.login-icon[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;background-color:#155dfc;color:#fff;width:70px;height:60px;margin:auto auto 0;border-radius:10px}.login-title[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:0;font-size:18px}.login-subtitle[_ngcontent-%COMP%]{margin-top:16px}.signInUp-buttons[_ngcontent-%COMP%], .createAccount-button[_ngcontent-%COMP%]{background-color:#f3f3f5;border:none;padding:4px;border-radius:16px;margin-top:30px}.toggle-button1[_ngcontent-%COMP%], .toggle-button2[_ngcontent-%COMP%]{text-decoration:none;border:none;border-radius:16px;width:185px}.toggle-button1[_ngcontent-%COMP%]{background-color:#fff}label[_ngcontent-%COMP%]{display:flex;margin-top:16px}.createAccount-button[_ngcontent-%COMP%]{background-color:#155dfc;color:#fff;width:100%}.line[_ngcontent-%COMP%]{width:100%;height:1px;margin-top:30px;background-color:#d3d3d3}.instrucion-con[_ngcontent-%COMP%]{align-items:center}.ins-desc[_ngcontent-%COMP%]{font-size:12px;text-align:left;background-color:#eff6ff;border-radius:8px;padding:16px}.instructions[_ngcontent-%COMP%]{margin-bottom:4px}.alert[_ngcontent-%COMP%]{font-family:Helvetica,Lucida Grande,Arial,Ubuntu,Cantarell,Fira Sans,"sans-serif";font-size:12px;color:#828282;margin-bottom:0}.toggle-button1.active[_ngcontent-%COMP%]{background-color:#fff}']})};export{G as RegisterComponent};
