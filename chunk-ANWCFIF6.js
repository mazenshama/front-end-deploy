import{a as y}from"./chunk-K3A6S7JU.js";import{d as S,e as M,g as w}from"./chunk-CMPSC4YI.js";import"./chunk-DVCEIMDV.js";import"./chunk-4QIIHPU5.js";import{a as E,b as g,c as I,d as L,e as P,g as f,i as F,k as O,l as k,q as A}from"./chunk-6TR5I43M.js";import{$ as b,$a as s,Aa as x,Da as m,Ea as u,Pa as p,Sa as d,Za as e,Zb as C,_a as t,db as h,eb as _,ib as n,rb as v}from"./chunk-LV7AXBPZ.js";function N(o,i){o&1&&(e(0,"div",23),n(1," Invalid email format or Email not found "),t())}function G(o,i){o&1&&(e(0,"p"),n(1,"Password is required"),t())}function T(o,i){o&1&&(e(0,"p"),n(1,"Password must contain at least eight characters, at least one number and both lower and uppercase letters and special characters."),t())}function D(o,i){if(o&1&&(e(0,"div",23),p(1,G,2,0,"p",24)(2,T,2,0,"p",24),t()),o&2){let r,a,l=_();m(),d("ngIf",(r=l.loginForm.get("password"))==null?null:r.getError("required")),m(),d("ngIf",(a=l.loginForm.get("password"))==null?null:a.getError("pattern"))}}var R=class o{constructor(i,r){this._AuthServices=i;this._Router=r}isLoginMode=!0;errorMessage="";isLoading=!1;loginForm=new P({email:new f("",[g.required,g.email]),password:new f("",[g.required,g.pattern(/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{8,}$/)])});toggleMode(){this.isLoginMode=!this.isLoginMode,this.errorMessage=""}logIn(){this.loginForm.valid&&(this.isLoading=!0,this.errorMessage="",this._AuthServices.serLogIn(this.loginForm.value).subscribe({next:i=>{if(this.isLoading=!1,i.success&&i.user){let r=i.user.role.toLowerCase();r==="admin"?this._Router.navigate(["/admin"]):r==="driver"?this._Router.navigate(["/driver"]):this._Router.navigate(["/home"])}else this.errorMessage=i.message||"Login failed"},error:i=>{this.isLoading=!1,this.errorMessage=i.error?.message||"An error occurred during login",console.error("Login error:",i)}}))}static \u0275fac=function(r){return new(r||o)(u(y),u(S))};static \u0275cmp=b({type:o,selectors:[["app-login"]],standalone:!0,features:[v],decls:41,vars:3,consts:[["rel","stylesheet","href",x`https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css`],[1,"login-con"],[1,"login-card"],[1,"login-icon"],[1,"fa-solid","fa-lg","fa-bus-side"],[1,"login-title"],[1,"login-subtitle"],[1,"signInUp-buttons"],["routerLink","/register",1,"toggle-button1"],["routerLink","/login",1,"toggle-button2"],[3,"ngSubmit","formGroup"],[1,"label"],["type","email","formControlName","email","placeholder","example@gmail.com",1,"form-control"],["class","alert alert-danger","role","alert",4,"ngIf"],["type","password","formControlName","password","placeholder","Enter the pass",1,"form-control"],["type","submit",1,"signIn-button"],[1,"fa-solid","fa-arrow-right-to-bracket"],[1,"line"],[1,"instrucion-con"],[1,"fw-bold"],[1,"ins-desc"],[1,"instructions"],[1,"alert"],["role","alert",1,"alert","alert-danger"],[4,"ngIf"]],template:function(r,a){if(r&1&&(s(0,"link",0),e(1,"div",1)(2,"div",2)(3,"div",3),s(4,"i",4),t(),e(5,"h4",5),n(6,"BusTrack"),t(),e(7,"p",6),n(8,"Sign in to access your dashboard"),t(),e(9,"div",7)(10,"button",8),n(11,"Sign Up"),t(),e(12,"button",9),n(13,"Sign In"),t()(),e(14,"form",10),h("ngSubmit",function(){return a.logIn()}),e(15,"label",11),n(16,"Email"),t(),s(17,"input",12),p(18,N,2,0,"div",13),e(19,"label",11),n(20,"Password"),t(),s(21,"input",14),p(22,D,3,2,"div",13),e(23,"button",15),s(24,"i",16),n(25," Sign In "),t()(),s(26,"p",17),e(27,"div",18)(28,"p",19),n(29,"Getting Started:"),t(),e(30,"div",20)(31,"p",21),n(32,"1. Create your account and select your role (Admin/Driver)"),t(),e(33,"p",21),n(34,"2.Use a 6+ character password to sign in automatically"),t(),e(35,"p",21),n(36,"3. Password must be at least 6 characters"),t(),e(37,"p",21),n(38,"4. You'l be automatically signed in after signup"),t()(),e(39,"p",22),n(40,'If "Invalid credentials" appears, check that you have registered an account first.'),t()()()()),r&2){let l,c;m(14),d("formGroup",a.loginForm),m(4),d("ngIf",((l=a.loginForm.get("email"))==null?null:l.invalid)&&((l=a.loginForm.get("email"))==null?null:l.touched)),m(4),d("ngIf",((c=a.loginForm.get("password"))==null?null:c.invalid)&&((c=a.loginForm.get("password"))==null?null:c.touched))}},dependencies:[A,F,E,I,L,O,k,C,w,M],styles:['app-login[_ngcontent-%COMP%]{margin:0;padding:0;background-color:#000}.login-con[_ngcontent-%COMP%]{font-family:Arial;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;margin:30px auto;width:450px;padding:24px;box-shadow:0 2px 10px #0000001a;border-radius:10px}.login-icon[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;background-color:#155dfc;color:#fff;width:70px;height:60px;margin:auto auto 0;border-radius:10px}.login-title[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:0;font-size:18px}.login-subtitle[_ngcontent-%COMP%]{margin-top:16px}.signInUp-buttons[_ngcontent-%COMP%], .signIn-button[_ngcontent-%COMP%]{background-color:#f3f3f5;border:none;padding:4px;border-radius:16px;margin-top:30px}.toggle-button1[_ngcontent-%COMP%], .toggle-button2[_ngcontent-%COMP%]{text-decoration:none;border:none;border-radius:16px;width:185px}.toggle-button2[_ngcontent-%COMP%]{background-color:#fff}label[_ngcontent-%COMP%]{display:flex;margin-top:16px}.signIn-button[_ngcontent-%COMP%]{background-color:#155dfc;color:#fff;width:100%}.line[_ngcontent-%COMP%]{width:100%;height:1px;margin-top:40px;background-color:#d3d3d3}.instrucion-con[_ngcontent-%COMP%]{align-items:center}.ins-desc[_ngcontent-%COMP%]{font-size:12px;text-align:left;background-color:#eff6ff;border-radius:8px;padding:16px}.instructions[_ngcontent-%COMP%]{margin-bottom:4px}.alert[_ngcontent-%COMP%]{font-family:Helvetica,Lucida Grande,Arial,Ubuntu,Cantarell,Fira Sans,"sans-serif";font-size:12px;color:#979797}']})};export{R as LoginComponent};
