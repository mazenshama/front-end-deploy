import{a as u}from"./chunk-DVCEIMDV.js";import{a}from"./chunk-4QIIHPU5.js";import{O as r,R as o,W as i,m as n}from"./chunk-LV7AXBPZ.js";var l=class s{constructor(t){this.http=t;let e=this.getUser();e&&this.userSubject.next(e)}apiBaseUrl=`${u.apiBaseUrl}`;userSubject=new n(null);user$=this.userSubject.asObservable();serLogIn(t){return this.http.post(`${this.apiBaseUrl}/auth/login`,t).pipe(r(e=>{e.success&&e.token&&e.user&&(localStorage.setItem("token",e.token),localStorage.setItem("user",JSON.stringify(e.user)),this.userSubject.next(e.user))}))}serSignUp(t){return this.http.post(`${this.apiBaseUrl}/auth/register`,t).pipe(r(e=>{e.success&&e.token&&e.user&&(localStorage.setItem("token",e.token),localStorage.setItem("user",JSON.stringify(e.user)),this.userSubject.next(e.user))}))}getToken(){return localStorage.getItem("token")}getUser(){let t=localStorage.getItem("user");return t?JSON.parse(t):null}getRole(){return this.getUser()?.role??null}isLoggedIn(){return!!this.getToken()}logout(){localStorage.removeItem("token"),localStorage.removeItem("user"),this.userSubject.next(null)}static \u0275fac=function(e){return new(e||s)(i(a))};static \u0275prov=o({token:s,factory:s.\u0275fac,providedIn:"root"})};export{l as a};
